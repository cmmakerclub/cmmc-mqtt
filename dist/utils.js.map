{"version":3,"sources":["utils.js"],"names":["moment","require","winston","chalk","logger","Logger","level","process","env","LOG_LEVEL","transports","Console","timestamp","tz","format","formatter","options","toUpperCase","message","LOG_SHOW_TIMESTAMP","white","bold"],"mappings":";;;;;AAAA,IAAMA,SAASC,QAAQ,iBAAR,CAAf;AACA,IAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACA,IAAME,QAAQF,QAAQ,OAAR,CAAd;;AAEO,IAAMG,0BAAS,IAAKF,QAAQG,MAAb,CAAqB;AACzCC,SAAOC,QAAQC,GAAR,CAAYC,SAAZ,IAAyB,MADS;AAEzCC,cAAY,CACV,IAAKR,QAAQQ,UAAR,CAAmBC,OAAxB,CAAiC;AAC/BC,eAAW;AAAA,aAAMZ,SAASa,EAAT,CAAY,cAAZ,EAA4BC,MAA5B,CAAmC,qBAAnC,CAAN;AAAA,KADoB;AAE/BC,eAAW,mBAACC,OAAD,EAAa;AACtB,UAAIJ,YAAYI,QAAQJ,SAAR,EAAhB;AACA,UAAIN,QAAQU,QAAQV,KAAR,CAAcW,WAAd,EAAZ;AACA,UAAIC,UAAWF,QAAQE,OAAR,GAAkBF,QAAQE,OAA1B,GAAoC,EAAnD;AACA;AACA,UAAIX,QAAQC,GAAR,CAAYW,kBAAhB,EAAoC;AAClC,qBAAWhB,MAAMiB,KAAN,CAAYR,SAAZ,CAAX,UAAsCT,MAAMkB,IAAN,CAAWf,KAAX,CAAtC,SAA2DY,OAA3D;AACD,OAFD,MAEO;AACL,qBAAWf,MAAMkB,IAAN,CAAWf,KAAX,CAAX,SAAgCY,OAAhC;AACD;AACF;AAZ8B,GAAjC,CADU;AAF6B,CAArB,CAAf","file":"utils.js","sourcesContent":["const moment = require('moment-timezone')\nconst winston = require('winston')\nconst chalk = require('chalk')\n\nexport const logger = new (winston.Logger)({\n  level: process.env.LOG_LEVEL || 'info',\n  transports: [\n    new (winston.transports.Console)({\n      timestamp: () => moment().tz('Asia/Bangkok').format('YYYY-MM-DD HH:mm:ss'),\n      formatter: (options) => {\n        let timestamp = options.timestamp()\n        let level = options.level.toUpperCase()\n        let message = (options.message ? options.message : '')\n        // let meta = options.meta && Object.keys(options.meta).length ? '\\n\\t' + JSON.stringify(options.meta) : ''\n        if (process.env.LOG_SHOW_TIMESTAMP) {\n          return `[${chalk.white(timestamp)}] ${chalk.bold(level)} ${message}`\n        } else {\n          return `[${chalk.bold(level)} ${message}`\n        }\n      }\n    })\n  ]\n})\n"],"sourceRoot":"/Users/nat/projects/traffy/easy-mqtt/dist"}